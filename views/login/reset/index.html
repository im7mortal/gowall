{{define "head"}}
<title>Reset Your Password</title>
{{end}}

{{define "body"}}
<div class="row">
	<div class="col-sm-6">
		<div class="page-header">
			<h1>Reset Your Password</h1>
		</div>
		<div id="reset"></div>
	</div>
</div>
<script type="text/template" id="tmpl-reset">
	<form>
		<div class="alerts"><% _.each(errors, function(err) { %>
			<div class="alert alert-danger alert-dismissable">
				<button type="button" data-dismiss="alert" class="close">&times;</button><%- err %>
			</div><% }); %>
			<% if (success) { %>
			<div class="alert alert-info alert-dismissable">
				<button type="button" data-dismiss="alert" class="close">&times;</button>Your password has been reset. Please login to confirm.
			</div><% } %>
			<% if (id == undefined) { %>
			<div class="alert alert-warning alert-dismissable">
				<button type="button" data-dismiss="alert" class="close">&times;</button>You do not have a valid reset request.
			</div><% } %>
		</div><% if (!success && id != undefined) { %>
		<div class="form-group <%- errfor.password ? "has-error" : "" %>">
		<label>New Password:</label>
		<input type="password" name="password" value="<%= password %>" class="form-control"/><span class="help-block"><%- errfor.password %></span>
		</div>
		<div class="form-group <%- errfor.confirm ? "has-error" : "" %>">
		<label>Confirm Password:</label>
		<input type="password" name="confirm" value="<%= confirm %>" class="form-control"/><span class="help-block"><%- errfor.confirm %></span>
		</div><% } %>
		<div class="form-group"><% if (!success && id != undefined) { %>
			<button type="button" class="btn btn-primary btn-reset">Set Password</button><% } %>
			&nbsp;<a href="/login/" class="btn btn-link">Back to Login</a>
		</div>
	</form>
</script>
{{end}}

{{define "feet"}}
<script src="/public/views/login/reset/index.js?{{.CacheBreaker}}"></script>
{{end}}